{"ast":null,"code":"import _slicedToArray from\"/home/user/MyLinuxProjects/delolive/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import'./styles/LoginForm/LoginForm.css';import FormInput from'./UI/FormInput/FormInput';import{Link}from'react-router-dom';import{logined,selectLogin,selectLoginData,setLoginCounter}from'./globalSlices/loginSlice';import{useDispatch}from'react-redux';import{useSelector}from'react-redux';import{login,selectIsLoading,selectIsLoadingForm,selectLoginError}from'./globalSlices/authSlice';import Loader from'./UI/Loader/Loader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=function LoginForm(){var dispatch=useDispatch();var allData=useSelector(selectLoginData);var selectedLogin=useSelector(selectLogin);var isLoading=useSelector(selectIsLoading);var errorMessage=useSelector(selectLoginError);var isLoadingForm=useSelector(selectIsLoadingForm);function areAllFieldsFilled(obj){for(var key in obj){// @ts-ignore\nif(typeof obj[key]!=='string'||obj[key].trim()===''){return false;}}return true;}var sendALLData=function sendALLData(){console.log(allData);if(areAllFieldsFilled(allData)){console.log(allData);console.log('sendDate');dispatch(login(allData.email,allData.password));console.log('sendAllDataLogin');}else{console.log('areAllFieldsFilled - '+areAllFieldsFilled(allData));}};var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isSubmitDisabled=_useState2[0],setIsSubmitDisabled=_useState2[1];var isLoginSet=function isLoginSet(){dispatch(setLoginCounter());setIsSubmitDisabled(true);setTimeout(function(){dispatch(logined());setIsSubmitDisabled(false);},3000);};useEffect(function(){sendALLData();},[selectedLogin]);if(isLoading){return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',marginTop:100},children:/*#__PURE__*/_jsx(Loader,{width:100,height:100})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"LoginForm\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"LoginForm__title\",children:\"\\u0414\\u043E\\u0431\\u0440\\u044B\\u0439 \\u0434\\u0435\\u043D\\u044C!\"}),/*#__PURE__*/_jsx(\"form\",{className:\"LoginForm__wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"LoginForm__wrapper__form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"LoginForm__form__inputs\",children:[/*#__PURE__*/_jsx(FormInput,{title:\"\\u041B\\u043E\\u0433\\u0438\\u043D\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0432\\u043E\\u0439 email\",isLogin:true,field:\"email\",width:'large'}),/*#__PURE__*/_jsx(FormInput,{title:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",isPassword:true,isLogin:true,placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",field:\"password\",width:'large'})]}),errorMessage?/*#__PURE__*/_jsx(\"h4\",{className:\"Error-message\",children:errorMessage}):'',/*#__PURE__*/_jsxs(\"div\",{className:\"submitContainer\",children:[!isLoadingForm?/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"submitButton\",disabled:isSubmitDisabled,onClick:isLoginSet,value:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',marginTop:'50px'},children:/*#__PURE__*/_jsx(Loader,{width:60,height:60})}),/*#__PURE__*/_jsx(Link,{className:\"registrationLink\",to:\"/registration\",children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]})]})})]});};export default LoginForm;","map":{"version":3,"names":["React","useEffect","useState","FormInput","Link","logined","selectLogin","selectLoginData","setLoginCounter","useDispatch","useSelector","login","selectIsLoading","selectIsLoadingForm","selectLoginError","Loader","LoginForm","dispatch","allData","selectedLogin","isLoading","errorMessage","isLoadingForm","areAllFieldsFilled","obj","key","trim","sendALLData","console","log","email","password","isSubmitDisabled","setIsSubmitDisabled","isLoginSet","setTimeout","display","justifyContent","marginTop"],"sources":["/home/user/MyLinuxProjects/delolive/frontend/src/components/LoginForm.tsx"],"sourcesContent":["import React, { FC, useEffect, useState } from 'react';\nimport './styles/LoginForm/LoginForm.css'\nimport Title from './UI/Title/Title';\nimport FormInput from './UI/FormInput/FormInput';\nimport { Link } from 'react-router-dom';\nimport { logined, selectLogin, selectLoginData, setLoginCounter } from './globalSlices/loginSlice';\nimport { useDispatch } from 'react-redux';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { RootState } from '../store/store';\nimport { useSelector } from 'react-redux';\nimport LoginModel from '../types/LoginModel';\nimport { login, selectIsLoading, selectIsLoadingForm, selectLoginError } from './globalSlices/authSlice';\nimport Loader from './UI/Loader/Loader';\n\n\nconst LoginForm: FC = () => {\n    type AppDispatch = ThunkDispatch<RootState, void, any>;\n    const dispatch: AppDispatch = useDispatch();\n\n    const allData: LoginModel = useSelector(selectLoginData)\n    const selectedLogin = useSelector(selectLogin)\n    const isLoading = useSelector(selectIsLoading)\n    const errorMessage = useSelector(selectLoginError)\n    const isLoadingForm = useSelector(selectIsLoadingForm)\n\n\n    function areAllFieldsFilled(obj: object) {\n        for (var key in obj) {\n        // @ts-ignore\n          if (typeof obj[key] !== 'string' || obj[key].trim() === '') {\n            return false;\n          }\n        }\n        return true;\n    }\n\n    const sendALLData = () => {\n        console.log(allData)\n        if(areAllFieldsFilled(allData)){\n            console.log(allData)\n            console.log('sendDate')\n            dispatch(login(allData.email, allData.password));\n            console.log('sendAllDataLogin')\n        }\n        else{\n            console.log('areAllFieldsFilled - ' + areAllFieldsFilled(allData))\n        }\n    }\n\n    const [isSubmitDisabled, setIsSubmitDisabled] = useState <boolean>(false)\n\n    const isLoginSet = () => {\n        dispatch(setLoginCounter())\n\n        setIsSubmitDisabled(true)\n\n        setTimeout(() => {\n            dispatch(logined())\n            setIsSubmitDisabled(false)\n        }, 3000)\n\n    }\n\n    useEffect(() => {\n        sendALLData()\n    }, [selectedLogin])\n\n    if(isLoading) {\n        return(\n            <div style={{display:'flex', justifyContent: 'center', marginTop: 100}}>\n                <Loader width={100} height={100}></Loader>\n            </div>\n        )\n    }\n\n\n    return (\n        <div className='LoginForm'>\n            <h3 className='LoginForm__title'>Добрый день!</h3>\n            <form className=\"LoginForm__wrapper\">\n                <div className=\"LoginForm__wrapper__form\">\n                    <div className=\"LoginForm__form__inputs\">\n                        <FormInput\n                        title='Логин'\n                        placeholder='Введите свой email'\n                        isLogin={true}\n                        field='email'\n                        width={'large'}\n                        />\n                        <FormInput\n                        title='Пароль'\n                        isPassword={true}\n                        isLogin={true}\n                        placeholder='Введите пароль'\n                        field='password'\n                        width={'large'}\n\n                        />\n                    </div>\n                    {errorMessage ? <h4 className=\"Error-message\">{errorMessage}</h4> : ''}\n                    <div className=\"submitContainer\">\n                        {!isLoadingForm ?\n                        <input\n                            type=\"submit\"\n                            className='submitButton'\n                            disabled={isSubmitDisabled}\n                            onClick={isLoginSet}\n                            value=\"Войти\"\n                        />\n                        :\n                        <div style={{display:'flex', justifyContent: 'center', marginTop: '50px'}}>\n                            <Loader width={60} height={60}></Loader>\n                        </div>\n                        }\n                        <Link className=\"registrationLink\" to='/registration' >\n                            Зарегистрироваться\n                        </Link>\n                    </div>\n                \n                </div>\n            </form>\n            \n        </div>\n    )\n};\n\nexport default LoginForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}